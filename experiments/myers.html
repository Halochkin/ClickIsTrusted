<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
hello sunshine
<script type="module">
  import {unify} from "./myerUnify.js";
  import {myersDiff, convert} from "./myerLifting2.js";
  import {testsMyers, bigTest} from "./levenshteinTests.js";

  function test(tar, ref, opsRawExpect, opsCleanExpect) {
    let opsRaw = myersDiff(tar, ref);
    let opsClean = unify(opsRaw);
    const res = convert(ref, opsClean, false, tar);
    const resInvert = convert(tar, opsClean, true, ref);
    if (
      res === tar &&
      resInvert === ref &&
      JSON.stringify(opsRaw) === JSON.stringify(opsRawExpect) &&
      JSON.stringify(opsClean) === JSON.stringify(opsCleanExpect || opsRaw)
    )
      return [tar, ref, opsClean];
    console.log("tar:", tar);
    console.log("ref:", ref);
    console.log("Expected:", opsRawExpect);
    console.log("Real:", opsClean);
    console.log(JSON.stringify(opsClean));
    return [tar, ref, opsClean];
  }

  const start = performance.now();
  const res = testsMyers/*.concat(bigTest)*/.map(t => test(...t));
  console.log(performance.now() - start);
  // console.log(JSON.stringify(res));
</script>
</body>
</html>